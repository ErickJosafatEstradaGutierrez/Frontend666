<!-- list-expedientes.component.html -->
<div class="expedientes-container">
  <p-card header="Listado de Expedientes">
    <div class="header-actions">
      <button pButton type="button" label="Nuevo Expediente" 
              routerLink="/expedientes/crear" class="p-button-success"></button>
    </div>

    <p-table *ngIf="expedientes.length > 0 && !loading" [value]="expedientes" [paginator]="true" [rows]="10">
      <ng-template pTemplate="header">
        <tr>
          <th>ID Expediente</th>
          <th>ID Paciente</th>
          <th>Seguro</th>
          <th>Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-expediente>
        <tr>
          <td>{{ expediente.id_expediente }}</td>
          <td>{{ expediente.id_paciente }}</td>
          <td>{{ expediente.seguro }}</td>
          <td>
            <button pButton type="button" icon="pi pi-eye" 
                    [routerLink]="['/expedientes', expediente.id_expediente]"
                    class="p-button-rounded p-button-info"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <p-card *ngIf="expedientes.length === 0 && !loading" header="No hay expedientes">
      <p>No se encontraron expedientes registrados.</p>
    </p-card>

    <p-card *ngIf="loading" header="Cargando...">
      <p-progressSpinner></p-progressSpinner>
    </p-card>

    <p-card *ngIf="error && !loading" header="Error">
      <p-message severity="error" [text]="error"></p-message>
    </p-card>
  </p-card>
</div>